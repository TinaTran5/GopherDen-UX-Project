<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Window</title>
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/window.css">
    <link rel="icon" type="image/x-icon" href="/img/stone1.png">
</head>
<body>
<nav>
    <div class="left">
        <p onclick="location.href='welcome.html'">GopherDen</p>
    </div>
    <div class="right">
        <a href="welcome.html">Home</a>
        <a href="browse.html">Browse</a>
        <a href="about.html">About</a>
        <a href="window.html">Window</a>
        <img src="/img/profile.png" alt="profile" onclick="location.href='profile.html'">
    </div>
</nav>
<section class="video">
    <video id="bg-video" autoplay muted loop playsinline>
        <source src="/videos/snow.mp4" type="video/mp4" />
        Your browser does not support the video tag.
    </video>
    <div class="video-controls">
        <button onclick="prevVideo()">◀</button>
        <p>"Video Title"</p>
        <button onclick="nextVideo()">▶</button>
    </div>

    <div class="sidebar">
        <button class="sidebar-btn"><img src="/img/sound-off.svg" alt="Sound"></button>
        <button class="sidebar-btn"><img src="/img/brightness.png" alt="brightness"></button>
        <button class="sidebar-btn"><img src="/img/heart.svg" alt="favorite"></button>
        <button class="sidebar-btn"><img src="/img/timer.svg" alt="Time"></button>
    </div>
</section>
<div id="rock-bubble">
    <img id="persistent-rock" alt="Your rock" />
    <div class="talk-bubble tri-right round btm-left-in">
        <div class="text">
            <p>Breathe in, breathe out</p>
        </div>
    </div>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const rockImg = localStorage.getItem("selectedRock");
            if (rockImg) {
                const rockDisplay = document.getElementById("persistent-rock");
                rockDisplay.src = rockImg;
            }
        });
    </script>
    <script src="/js/welcome.js"></script>
    <script>
        const videos = [
            "/videos/snow.mp4",
            "/videos/background.mp4"
        ];

        let currentIndex = 0;

        function loadVideo(index) {
            const videoElement = document.getElementById("bg-video");
            videoElement.pause();
            videoElement.querySelector("source").src = videos[index];
            videoElement.load();
            videoElement.play();
        }

        function nextVideo() {
            currentIndex = (currentIndex + 1) % videos.length;
            loadVideo(currentIndex);
        }

        function prevVideo() {
            currentIndex = (currentIndex - 1 + videos.length) % videos.length;
            loadVideo(currentIndex);
        }
    </script>
</div>
</body>
</html>